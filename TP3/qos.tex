\subsection{Présentation de la problématique}
 
Dans certains systèmes IoT, les données qui sont utilisées ont une importance cruciale, voire vitale. Ces données se doivent être fiables, et disponible. Dans le domaine du smart Health, les capteurs qui sont utilisés pour surveiller des indices vitaux du patient, leur dysfonctionnement pourrait mettre en péril la vie du patient en envoyant des données erronées qui peuvent induire le personnel médical en en erreur. Les systèmes utilisent dans l’IoT peuvent comprendre des actionneurs ou agir sur des objets, qui eux vont avoir des répercussions sur une éventuelle personne, c’est pourquoi l’utilisation de ces objets doit être fiables.

Dans notre système pour la surveillance des patients dans le département de soins intensifs, les problématiques de fiabilité, de tolérances aux pannes et de disponibilités ont une importance cruciale car elles ont lien avec la vie du patient. La fiabilité des dispositifs qui sont proposés dans le domaine de la santé doivent être capables de détecter immédiatement toute défaillance ou panne d’un objet pour que des mesures puissent être prises en conséquence. Notre architecture en couche, permet de repérer une éventuelle défaillance ou une panne d’un dispositif. Les données et actionneurs dans notre système doivent être disponible pour le personnel médical qui pourra l’utiliser pour s’aider dans ces tâches quotidiennes. Les problématiques que nous voyons dans notre système sont liées aux problématiques de sécurité. Nous verrons dans la suite de cette section les mesures que nous avons prises pour s’assurer d’un minimum de QoS dans notre architecture à travers les différentes couches.
 
\subsection{Prise en compte de cette problématique dans la couche physique}

Les problématiques de QoS se retrouvant dans toute l’architecture que nous avons proposée, nous les avons prises en compte dans chacune des couches. Notre solution détaillée dans les différents rapports comprend un grand nombre d’éléments répondant à ces objectifs que nous allons récapituler ici.

Dans la couche physique, une première mesure afin d’améliorer la disponibilité pour permettre aux médecins d’être notifiés rapidement en cas de variations anormales, est de connecter les moniteurs via Ethernet au réseau de l’hôpital. Cela permet une plus grande capacité et limite le nombre d’interférences liées aux ondes. Une telle méthode permettrait de ne pas causer de dysfonctionnement avec d’autres appareils sensibles comme un scanner.

Au niveau de la couche de communication, notre système utilise le protocole UDP (avec sa surcouche DTLS) pour l’envoi de données fréquentes au Smart Gateway depuis le moniteur. Par données fréquentes, nous entendons des données qui sont fréquemment mises à jour. Pour de telles données, la perte de quelques paquets de manière épisodique n’est pas pénalisante, car elles sont mises à jour régulièrement. Un mécanisme applicatif toutefois devra détecter les pertes consécutives et déclencher des avertissements afin qu’un membre du personnel de l’hôpital aille vérifier l’état du capteur concerné. En revanche, pour les mesures prises de façon plus rares, il est nécessaire d’avoir un mécanisme d’accuse de réception (comme par exemple celui ouverte par TCP) afin de ne pas perdre de données. Enfin, le système doit être disponible et fiable. Dès qu’une mesure anormale est détectée, il faut connaitre la raison de cette anomalie. Si elle provient de l’appareil, il faut que celui-ci soit vérifié et changé si besoin est. Pour cela, on pourrait s’appuyer sur la fabrication d’un appareil qui intégrera certains cas de défaillance et en avertira un technicien, qui pourra être envoyé pour vérifier les capteurs pour des valeurs non conformes. Pour les autres anomalies détectées, un membre du personnel médical sera envoyé sur place. Ce serait alors à lui de vérifier que les données sont bien reliées au patient et non une erreur du dispositif, et d’appeler un technicien le cas échéant. Par ailleurs, il est nécessaire de mettre un place un timeout afin de lancer une alerte en l’absence de données durant un certain laps de temps. Selon les informations que caractérisent ces données, l’alerte ne sera pas la même. En effet, le dysfonctionnement d’un capteur selon ce qu’il mesure (fréquence cardiaque, température de la salle) n’a pas le même impact. Aussi, il y a une hiérarchisation du signal envoyé (alerte, avertissement, notification) selon la gravité de la panne afin que les pannes les plus graves soient traitées en premier. Cette hiérarchisation est illustrée sur la Figure suivante.
 
\subsection{Prise en compte de ces problématiques dans le middleware}
 
La fiabilité d’un middleware est une exigence essentielle. Un middleware doit rester opérationnel pendant toute la durée d’une mission, même en présence de pannes. La fiabilité du middleware aide en dernier recours la réalisation de la fiabilité au niveau du système. Chaque composant ou service dans un middleware doit être fiable pour atteindre la fiabilité globale, ce qui inclut celles de la communication, des données, des technologies et des dispositifs de toutes les couches. Les signes vitaux qui sont surveillés imposent au middleware d’être capable de transmettre les données de façon fiable sans corruption de celles-ci, et cela toujours à cause des données qui sont surveillées. Il est nécessaire d’introduire la disponibilité au sein de notre middleware. En effet, même s’il y a une défaillance quelque part dans le système, le temps de récupération et la fréquence de défaillance de celui-ci doivent être suffisamment petits pour obtenir la disponibilité souhaitée. Les exigences en matière de fiabilité et de disponibilité doivent travailler ensemble pour assurer la plus haute tolérance aux pannes nécessaire depuis une application. Le middleware doit pouvoir être capable de détecter si l’un de nos capteurs est en panne, et pour cela, il va faire des requêtes à intervalles réguliers des signes vitaux et en cas d’absence de réponse pendant un temps prédéfini, une alerte sera envoyée au personnel médical pour vérifier l’origine de l’erreur. Dans le domaine de la sante, ou la vie des patients est en jeu, nous ne pouvons pas nous permettre de laisser le patient sans surveillance médicale.
 
Enfin, il est impératif, dans la mesure du possible, de sécuriser les communications au sein du système. Cela passe par un contrôle d’accès au niveau du moniteur avec un mécanisme d’authentification. Mais aussi par une détection des pannes, qui sera géré par un module propre. En effet, il est souhaitable, de par l’importance des données fournies par ces capteurs, qu’ils soient remplacés dès le premier indice de dysfonctionnement. De manière générale, il est important de garantir une bonne disponibilité ainsi qu’une certaine fiabilité. Ces considérations sur la détection de pannes entrainent également la nécessite de disposer d’un module d’émission d’évènements afin que le middleware du moniteur intelligent puisse avertir immédiatement la Smart Gateway d’un dysfonctionnement d’un capteur, ou d’une valeur anormale par rapport au profil du patient (par exemple une crise cardiaque).
 
\subsection{Prise en compte vis-à-vis des applications}
 
Les applications que nous proposons ont pour but d’être utilisées sur des téléphones intelligents, des tablettes ou des ordinateurs. Dans le cadre de notre architecture, les applications sur lesquelles la QoS est importante sont celles liées au personnel médical.

Nous avons décrit différents processus pour assurer un minimum de QoS dans les couches précédentes, nous allons nous intéresser maintenant à comment vont être récupère et utilise les données. Dans ce qui a été décrit au niveau des applications, celles-ci nous permettent de centraliser les différentes données des différents capteurs. Ces données peuvent être récupérée directement à partir des capteurs ou depuis le système de stockage pour la consultation d’historique.

Les détections d’anomalies sont mises en place au niveau du Gateway et du qui font remonter à l’application les différentes pannes détectées. Les applications vont pouvoir agir sur les seuils de détections d’anomalies pour que le personnel médical puisse ajuster en fonction du profil du patient les différents capteurs. Les applications utilisées par le personnel médical vont principalement être utilisées pour avertir le personnel médical de différentes alertes et anomalies provenant des différents dispositifs. Au niveau de l’application utilisée pour la consultation plus détaille d’un profil d’un patient, l’utilisateur sera notifié des différentes alertes qui lui sont destinées pour qu’il puissent les prendre en charge avec la possibilité d’informer le système de sa non-disponibilité. Les différentes alertes vont être aussi affichées sur l’application centrale, pour une redondance des informations et pour que l’alerte soit au moins visible par l’équipe médical d’astreinte en cas de défaillance d’un dispositif d’un membre du personnel médical.

La détection des pannes matériels se fera au niveau du middleware et de la smart Gateway qui feront remonter l’information au niveau de l’application central pour qu’un membre du personnel médical puisse se diriger sur la zone de la panne et prendre les mesures adéquates.

Au niveau de la disponibilité des données, le système de stockage interne à l’hôpital va permettre aux différentes applications de chercher les informations dans le réseau local et de ne pas être dépendant d’Internet.             